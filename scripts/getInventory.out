
R version 4.4.0 (2024-04-24) -- "Puppy Cup"
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: aarch64-apple-darwin20

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> # getInventory.R
> # R code to get 2025 inventory
> # Tom Davidoff
> # 05/30/25
> 
> library(data.table)
> dirr <- "~/OneDrive\ -\ UBC/Documents/data/bca/Residential_inventory_202501"
> files <- list.files(dirr)
> goodAreas <- c("08","09","10","11","14","15")
> goodFiles <- paste0("~/OneDrive\ -\ UBC/Documents/data/bca/Residential_inventory_202501/20250101_A",goodAreas,"_Residential_Inventory_Extract.txt")
> print(goodFiles)
[1] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A08_Residential_Inventory_Extract.txt"
[2] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A09_Residential_Inventory_Extract.txt"
[3] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A10_Residential_Inventory_Extract.txt"
[4] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A11_Residential_Inventory_Extract.txt"
[5] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A14_Residential_Inventory_Extract.txt"
[6] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A15_Residential_Inventory_Extract.txt"
> outfile <- data.table()
> for (k in goodFiles) {
+ 	print(k)
+ 	df <- fread(file=k,select=c("Jurisdiction","Roll_Number","MB_Year_Built","MB_Effective_Year","Zoning"),colClasses=c("Roll_Number"="character"))
+ 	print(summary(df))
+ 	outfile <- rbind(outfile,df)
+ }
[1] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A08_Residential_Inventory_Extract.txt"
  Jurisdiction   Roll_Number        MB_Year_Built  MB_Effective_Year
 Min.   :221.0   Length:115636      Min.   :   0   Min.   :   0     
 1st Qu.:316.0   Class :character   1st Qu.:1972   1st Qu.:1980     
 Median :328.0   Mode  :character   Median :1988   Median :1992     
 Mean   :385.8                      Mean   :1987   Mean   :1948     
 3rd Qu.:390.0                      3rd Qu.:2006   3rd Qu.:2005     
 Max.   :748.0                      Max.   :2024   Max.   :2024     
                                    NA's   :8861   NA's   :8875     
    Zoning         
 Length:115636     
 Class :character  
 Mode  :character  
                   
                   
                   
                   
[1] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A09_Residential_Inventory_Extract.txt"
  Jurisdiction   Roll_Number        MB_Year_Built  MB_Effective_Year
 Min.   :200.0   Length:206381      Min.   :1892   Min.   :   0     
 1st Qu.:200.0   Class :character   1st Qu.:1980   1st Qu.:1982     
 Median :200.0   Mode  :character   Median :1997   Median :1997     
 Mean   :215.9                      Mean   :1990   Mean   :1945     
 3rd Qu.:200.0                      3rd Qu.:2010   3rd Qu.:2009     
 Max.   :739.0                      Max.   :2024   Max.   :2024     
                                    NA's   :673    NA's   :675      
    Zoning         
 Length:206381     
 Class :character  
 Mode  :character  
                   
                   
                   
                   
[1] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A10_Residential_Inventory_Extract.txt"
  Jurisdiction   Roll_Number        MB_Year_Built  MB_Effective_Year
 Min.   :220.0   Length:205040      Min.   :1877   Min.   :   0     
 1st Qu.:225.0   Class :character   1st Qu.:1980   1st Qu.:1981     
 Median :301.0   Mode  :character   Median :1997   Median :1994     
 Mean   :281.1                      Mean   :1995   Mean   :1859     
 3rd Qu.:305.0                      3rd Qu.:2013   3rd Qu.:2009     
 Max.   :743.0                      Max.   :2024   Max.   :2024     
                                    NA's   :1880   NA's   :1880     
    Zoning         
 Length:205040     
 Class :character  
 Mode  :character  
                   
                   
                   
                   
[1] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A11_Residential_Inventory_Extract.txt"
  Jurisdiction   Roll_Number        MB_Year_Built  MB_Effective_Year
 Min.   :306.0   Length:115520      Min.   :   0   Min.   :   0     
 1st Qu.:306.0   Class :character   1st Qu.:1978   1st Qu.:1980     
 Median :320.0   Mode  :character   Median :1993   Median :1992     
 Mean   :317.7                      Mean   :1993   Mean   :1905     
 3rd Qu.:320.0                      3rd Qu.:2011   3rd Qu.:2008     
 Max.   :403.0                      Max.   :2024   Max.   :2024     
                                    NA's   :1469   NA's   :1471     
    Zoning         
 Length:115520     
 Class :character  
 Mode  :character  
                   
                   
                   
                   
[1] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A14_Residential_Inventory_Extract.txt"
  Jurisdiction   Roll_Number        MB_Year_Built  MB_Effective_Year
 Min.   :236.0   Length:172242      Min.   :1900   Min.   :   0     
 1st Qu.:326.0   Class :character   1st Qu.:1986   1st Qu.:1986     
 Median :326.0   Mode  :character   Median :1999   Median :1997     
 Mean   :321.2                      Mean   :1997   Mean   :1890     
 3rd Qu.:326.0                      3rd Qu.:2011   3rd Qu.:2009     
 Max.   :736.0                      Max.   :2024   Max.   :2024     
                                    NA's   :2536   NA's   :2537     
    Zoning         
 Length:172242     
 Class :character  
 Mode  :character  
                   
                   
                   
                   
[1] "~/OneDrive - UBC/Documents/data/bca/Residential_inventory_202501/20250101_A15_Residential_Inventory_Extract.txt"
  Jurisdiction   Roll_Number        MB_Year_Built  MB_Effective_Year
 Min.   :216.0   Length:202395      Min.   :   0   Min.   :   0     
 1st Qu.:311.0   Class :character   1st Qu.:1980   1st Qu.:1980     
 Median :312.0   Mode  :character   Median :1994   Median :1992     
 Mean   :326.5                      Mean   :1994   Mean   :1816     
 3rd Qu.:313.0                      3rd Qu.:2009   3rd Qu.:2006     
 Max.   :776.0                      Max.   :2024   Max.   :2024     
                                    NA's   :7355   NA's   :7373     
    Zoning         
 Length:202395     
 Class :character  
 Mode  :character  
                   
                   
                   
                   
> 
> fwrite(outfile,"data/derived/inventory2025.csv")
> 
> 
> 
> 
> proc.time()
   user  system elapsed 
  1.428   0.158   2.168 
